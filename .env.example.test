# ============================================================
# AURELIUS SUBNET - TESTNET CONFIGURATION (Full Options)
# ============================================================
# Network: Testnet (Subnet 290)
#
# NOTE: Most settings are now AUTO-DETECTED!
# - Wallet: Auto-detected if you have exactly one
# - Thresholds: Auto-set based on BT_NETUID (290 = testnet defaults)
#
# IMPORTANT: To override auto-set thresholds, you must set ADVANCED_MODE=true
#
# For a minimal config, see .env.example instead.
# This file shows ALL available options for advanced users.
#
# Copy this file to .env and fill in your actual values:
#   cp .env.example.test .env
#
# NEVER commit .env with real credentials to version control
# ============================================================

# ============================================================
# ADVANCED MODE (required to override network defaults)
# ============================================================
# By default, thresholds and parameters are auto-set based on BT_NETUID.
# Set ADVANCED_MODE=true to use custom values for:
#   DANGER_THRESHOLD, MIN_HIT_RATE_THRESHOLD, MIN_VALIDATOR_STAKE, etc.
#
# WARNING: Only enable if you understand the implications!
# ADVANCED_MODE=true

# ============================================================
# REQUIRED: Chat Provider Configuration
# ============================================================
# Chat provider: "chutes" (default, uses DeepSeek-V3) or "openai"
CHAT_PROVIDER=chutes

# Chutes.ai API key (required if CHAT_PROVIDER=chutes)
# Get your API key from: https://chutes.ai
CHUTES_API_KEY=your-chutes-api-key-here

# Chutes.ai API base URL (default: https://llm.chutes.ai/v1)
# CHUTES_API_BASE_URL=https://llm.chutes.ai/v1

# Default vendor and model for chat
DEFAULT_VENDOR=chutes
DEFAULT_MODEL=deepseek-ai/DeepSeek-V3

# ============================================================
# REQUIRED: OpenAI API Configuration (for moderation)
# ============================================================
# Get your API key from: https://platform.openai.com/api-keys
# NOTE: OpenAI is always required for content moderation
OPENAI_API_KEY=your-openai-api-key-here

# Maximum tokens for LLM responses (affects response length)
OPENAI_MAX_TOKENS=2048

# ============================================================
# Moderation Configuration (Auto-Set for Testnet)
# ============================================================
# These thresholds are AUTO-SET based on BT_NETUID=290 (testnet).
# Uncomment only if you need to override the network defaults.
#
# Aggregate threshold for combined moderation score (0.0 - 1.0)
# Testnet default: 0.2
# DANGER_THRESHOLD=0.2

# Single category threshold (0.0 - 1.0)
# If ANY individual category score >= this value, prompt is automatically accepted
SINGLE_CATEGORY_THRESHOLD=0.8

# ============================================================
# Rate Limiting
# ============================================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_HOURS=1.0

# ============================================================
# Dataset Collection
# ============================================================
LOCAL_DATASET_PATH=./datasets
ENABLE_LOCAL_BACKUP=true

# Central API for data aggregation
CENTRAL_API_ENDPOINT=https://aurelius-data-collector-api-staging.up.railway.app/api/collections
# CENTRAL_API_KEY=your-central-api-key-here

# ============================================================
# Consensus Verification
# ============================================================
ENABLE_CONSENSUS=true
CONSENSUS_VALIDATORS=5
CONSENSUS_RUNS_PER_VALIDATOR=3
CONSENSUS_REQUIRED_VOTES=4
CONSENSUS_TIMEOUT=60

# Minimum stake required (AUTO-SET: mainnet=1000, testnet=100)
# MIN_VALIDATOR_STAKE=100.0

# ============================================================
# Distribution Configuration
# ============================================================
MIN_TOTAL_RUNS_PER_PROMPT=15
DISTRIBUTION_MODE=dangerous_only

# ============================================================
# Hit Rate Threshold (AUTO-SET for Testnet)
# ============================================================
# Minimum acceptance rate required for rewards
# AUTO-SET: mainnet=0.4, testnet=0.3
# MIN_HIT_RATE_THRESHOLD=0.3

# ============================================================
# Top-N Reward Configuration
# ============================================================
TOP_REWARDED_MINERS=3

# ============================================================
# Miner Burn Configuration
# ============================================================
MINER_BURN_ENABLED=false
MINER_BURN_PERCENTAGE=0.9
BURN_UID=200

# ============================================================
# Novelty Detection Configuration (AUTO-SET for Testnet)
# ============================================================
NOVELTY_WEIGHT=1.0
# AUTO-SET: mainnet=0.7, testnet=0.3
# MIN_NOVELTY_THRESHOLD=0.3
NOVELTY_API_ENDPOINT=https://aurelius-data-collector-api-staging.up.railway.app/api/novelty

# ============================================================
# Validator Trust/Reputation System
# ============================================================
ENABLE_VALIDATOR_TRUST_TRACKING=true
MIN_VALIDATOR_TRUST_SCORE=0.7
VALIDATOR_TRUST_DECAY_RATE=0.95
VALIDATOR_TRUST_PERSISTENCE_PATH=./validator_trust.json
MINER_SCORES_PATH=./miner_scores.json

# ============================================================
# Verification Thresholds
# ============================================================
MAX_SCORE_VARIANCE_THRESHOLD=0.05
MIN_RESPONSE_TIME_SECONDS=2.0

# ============================================================
# Bittensor Network Configuration - TESTNET
# ============================================================
BT_NETWORK=test
BT_NETUID=290
BT_PORT_VALIDATOR=8091

# Subtensor endpoint (optional - auto-detected from BT_NETWORK)
# SUBTENSOR_ENDPOINT=wss://test.finney.opentensor.ai:443

# ============================================================
# Wallet Configuration (OPTIONAL - Usually Auto-Detected)
# ============================================================
# If you have exactly one wallet with one hotkey, it's auto-detected.
# Only set these if you have multiple wallets or want to override:
# VALIDATOR_WALLET_NAME=validator
# VALIDATOR_HOTKEY=default
# MINER_WALLET_NAME=miner
# MINER_HOTKEY=default

# ============================================================
# Network Configuration (for validators)
# ============================================================
AUTO_DETECT_EXTERNAL_IP=true
VALIDATOR_HOST=127.0.0.1

# ============================================================
# Logging Configuration
# ============================================================
LOG_LEVEL=INFO
LOG_SENSITIVE_DATA=false
MAX_LOG_LENGTH=100

# ============================================================
# Error Handling Configuration
# ============================================================
MODERATION_FAIL_MODE=closed

# ============================================================
# Development/Testing Flags
# ============================================================
# WARNING: These should be FALSE in production!
LOCAL_MODE=false
SKIP_WEIGHT_SETTING=false
# LOCAL_VALIDATOR_ENDPOINTS=http://127.0.0.1:8091,http://127.0.0.1:8092
