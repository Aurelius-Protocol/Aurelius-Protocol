# ==============================================================================
# TESTNET DEPLOYMENT CONFIGURATION
# ==============================================================================
# This file is used by the deployment script for testnet validator deployment
# Copy this to .env and fill in your API keys and wallet details
# ==============================================================================

# ==============================================================================
# 1. OpenAI API Configuration (REQUIRED)
# ==============================================================================
OPENAI_API_KEY=YOUR_API_KEY_HERE
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=1000

# Multi-vendor model configuration
ALLOWED_MODELS={"openai": ["gpt-4o", "gpt-4o-mini", "o4-mini", "o3-mini", "gpt-4-turbo", "gpt-3.5-turbo"]}
DEFAULT_VENDOR=openai
DEFAULT_MODEL=gpt-4o-mini

# Model parameter constraints
MIN_TEMPERATURE=0.0
MAX_TEMPERATURE=2.0
MIN_TOP_P=0.0
MAX_TOP_P=1.0
MIN_FREQUENCY_PENALTY=-2.0
MAX_FREQUENCY_PENALTY=2.0
MIN_PRESENCE_PENALTY=-2.0
MAX_PRESENCE_PENALTY=2.0

# ==============================================================================
# 2. Moderation Configuration
# ==============================================================================
MODERATION_PROVIDER=openai
DANGER_THRESHOLD=0.5
MODERATION_FAIL_MODE=closed

# Category weights for combined score calculation
MODERATION_CATEGORY_WEIGHTS={"hate": 1.0, "hate/threatening": 1.2, "harassment": 0.8, "harassment/threatening": 1.0, "self-harm": 1.5, "self-harm/intent": 1.5, "self-harm/instructions": 1.5, "sexual": 0.8, "sexual/minors": 2.0, "violence": 1.0, "violence/graphic": 1.2}

# ==============================================================================
# 3. Rate Limiting
# ==============================================================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_HOURS=1.0

# ==============================================================================
# 4. Dataset Collection & Logging (Production Paths)
# ==============================================================================
LOCAL_DATASET_PATH=/var/lib/aurelius/datasets
ENABLE_LOCAL_BACKUP=true

# Central API (optional - set if you have a data collection API)
CENTRAL_API_ENDPOINT=
CENTRAL_API_KEY=

# ==============================================================================
# 5. Consensus Verification (Disabled for single testnet validator)
# ==============================================================================
ENABLE_CONSENSUS=false
CONSENSUS_VALIDATORS=1
CONSENSUS_RUNS_PER_VALIDATOR=3
CONSENSUS_REQUIRED_VOTES=1
CONSENSUS_TIMEOUT=60
MIN_TOTAL_RUNS_PER_PROMPT=3

# Local validator endpoints for multi-validator local testing (optional)
LOCAL_VALIDATOR_ENDPOINTS=

# ==============================================================================
# 6. Distribution Configuration
# ==============================================================================
DISTRIBUTION_MODE=dangerous_only
MIN_VALIDATOR_STAKE=0.0

# ==============================================================================
# 7. Validator Trust System (Disabled for single validator)
# ==============================================================================
ENABLE_VALIDATOR_TRUST_TRACKING=false
VALIDATOR_TRUST_PERSISTENCE_PATH=/var/lib/aurelius/validator_trust.json
MIN_VALIDATOR_TRUST_SCORE=0.7
VALIDATOR_TRUST_DECAY_RATE=0.95

# ==============================================================================
# 8. Verification Thresholds
# ==============================================================================
MAX_SCORE_VARIANCE_THRESHOLD=0.01
MIN_RESPONSE_TIME_SECONDS=2.0

# ==============================================================================
# 9. Scoring and Weight Updates (Production Paths)
# ==============================================================================
MINER_SCORES_PATH=/var/lib/aurelius/miner_scores.json
WEIGHT_UPDATE_INTERVAL=100
MIN_SAMPLES_FOR_WEIGHTS=1

# Window-based rewards configuration
WINDOW_BLOCKS=1000
HISTORY_RETENTION_BLOCKS=10000

# ==============================================================================
# 10. Bittensor Network Configuration (TESTNET)
# ==============================================================================
BT_NETWORK=test
BT_NETUID=37
BT_PORT_VALIDATOR=8091

# Testnet subtensor endpoint
SUBTENSOR_ENDPOINT=wss://test.finney.opentensor.ai:443

# ==============================================================================
# 11. Wallet Configuration
# ==============================================================================
VALIDATOR_WALLET_NAME=validator
VALIDATOR_HOTKEY=default
MINER_WALLET_NAME=miner
MINER_HOTKEY=default

# ==============================================================================
# 12. Network Configuration
# ==============================================================================
AUTO_DETECT_EXTERNAL_IP=true
VALIDATOR_HOST=0.0.0.0

# ==============================================================================
# 13. Logging Configuration
# ==============================================================================
LOG_LEVEL=INFO
LOG_SENSITIVE_DATA=false
MAX_LOG_LENGTH=100

# ==============================================================================
# 14. Development/Testing Flags (PRODUCTION VALUES)
# ==============================================================================
LOCAL_MODE=false
SKIP_WEIGHT_SETTING=false

# ==============================================================================
# 15. Simulated Blockchain (Only used in LOCAL_MODE)
# ==============================================================================
SIMULATED_BLOCK_START=10000
SIMULATED_BLOCK_TIME=12.0
FAST_BLOCK_MODE=false
